{% extends "base.html" %}
{% block title %}Campaign Delivery toolkit Home {% endblock %}
{% block content %}
<h1>Campaign Extractor</h1>
<hr>
<div class="container">
    <h2>Report Summary</h2>
    <div class="row">
        <div class="col-md-6">
            <h5>Created on {{session.get("ce_last_run")}} by {{ session.get("bsd_email") }}. </h5>
        </div>
        <div class="col-md-6">

            <h5> Fromn {{session.get("start_date")}} to {{session.get("end_date")}} </h5>
        </div>
    </div>
</div>

    <br>


    <div class="col-md-12 text-center">
        <h4>Campaign performance</h4>
    </div>
    <br />
    <div class="button-container">
     
        <a class="btn btn-danger" href="/revenue/under" role="button">
            Campaigns underperforming: {{session.get("camp_under_number")}}
        </a>



        <a class="btn btn-warning" href="/revenue/over" role="button">
            Campaigns overperforming: {{session.get("camp_over_number")}}
        </a>


        <a class="btn btn-success" href="/revenue/target" role="button">
            Campaigns on target: {{session.get("camp_target_number")}}
        </a>


    </div>

<br />
<br />
<div class="container">
    <form method="POST">
       
            <div class="row">
                <div class="col-md-6">
                    <h5>Report preview</h5>
                </div>

                <div class="col-md-6">
                    <div class="col-md-12 text-right">
                        <button type="submit" class="btn btn-primary">Download CSV</button>
                    </div>
                </div>
            </div>



    </form>

    <br />
    <input type="text" id="searchInput" onkeyup="tableSearch()" placeholder="Search for ids, names and statuses...">
</div>

<div class="container tbl-container">
    <div class="row tbl-fixed">
        <table class="table-striped table-condensed" id="mainTable">
            <thead>
                <tr>
                    <th class="sortable" onclick="sortTable(0)">Proposal ID     </th>
                    <th class="sortable" onclick="sortTableNum(1)">BSC ID</th>
                    <th class="sortable" onclick="sortTable(2)">Proposal line Name</th>
                    <th class="sortable" onclick="sortTableNum(9)">Performance %</th>
                    <th class="sortable" onclick="sortTableNum(4)">Number of screens</th>
                    <th class="sortable" onclick="sortTable(5)">Status</th>
                    <th class="sortable" onclick="sortTable(6)">Type of buy</th>
                    <th class="sortable" onclick="sortTable(7)">Start Date</th>
                    <th class="sortable" onclick="sortTable(8)">End Date</th>
                    <th style="display:none;">Perf for sorting</th>
                </tr>
            </thead>
            <tbody>
                {% for item in session.get("campaign_extractor") %}

                <tr>
                    <td> <a href="{{session.get("env")}}/proposal_builder.html?id={{item["proposal id"]}}" target="_blank">{{ item["proposal id"] }}</a></td>
                    <td> {{ item["BSC ID"] | int}}  </td>
                    <td> {{ item["PLI Name"] }}  </td>
                    <td> {{ item["Campaign Performance %"] }} </td>
                    <td> {{ item["Number of screens"] | int }}  </td>
                    <td> {{ item["PLI Status"] }}  </td>
                    <td> {{ item["TOB"] }}  </td>
                    <td> {{ item["Start date"] }}  </td>
                    <td> {{ item["End date"] }}  </td>
                    <td style="display:none;"> {{ item["Campaign Performance %"] | int }} </td>
                </tr>

                {% endfor %}
            </tbody>
        </table>
    </div>
</div>








        {% endblock %}
